import{tinycolor as e}from"@thebespokepixel/es-tinycolor";import{camelCase as n,kebabCase as t,snakeCase as r,upperFirst as i,template as o,chain as s,isArray as a,extend as p,cloneDeep as c,clone as l,isString as h,isPlainObject as f,matches as u,assign as m,filter as d,reduce as y,isObject as g,isEmpty as w}from"lodash-es";const v=/&#x([^;]+);/g;function b(e){return/^colors?$/.test(e.attributes.category)}function S(e){return/^(sizes?)$/.test(e.attributes.category)}function A(e){return S(e)&&("font"===e.attributes.type||"icon"===e.attributes.type)}function N(e){return!A(e)}function I(e){return/^assets?$/.test(e.attributes.category)}function x(e){return/^contents?$/.test(e.attributes.category)}function F(e,n){return`${e}${n.value}${e}`}function L(e){return F('"',e)}function O(e,n,t){throw`Invalid Number: '${e}: ${n}' is not a valid number, cannot transform to '${t}' \n`}var T={"attribute/cti":{type:"attribute",transformer:function(e){const n=["category","type","item","subitem","state"].reverse(),t=e.attributes||{},r={};for(let t=0;t<e.path.length&&n.length>0;t++)/^colors?/.test(r.category)&&/^modes?/.test(e.path[t])?(r.mode=e.path[t+1],e.path.splice(t,1)):r[n.pop()]=e.path[t];return Object.assign(r,t)}},"attribute/color":{type:"attribute",matcher:b,transformer:function(n){var t=e(n.value);return{hex:t.toHex(),rgb:t.toRgb(),hsl:t.toHsl(),hsv:t.toHsv()}}},"name/human":{type:"name",transformer:function(e){return[e.attributes.item,e.attributes.subitem].join(" ")}},"name/cti/camel":{type:"name",transformer:function(e,t){return n([t.prefix].concat(e.path).join(" "))}},"name/ti/camel":{type:"name",transformer:function(e,t){return n([t.prefix].concat(e.path.slice(1,e.path.length)).join(" "))}},"name/cti/kebab":{type:"name",transformer:function(e,n){return t([n.prefix].concat(e.path).join(" "))}},"name/cti/snake":{type:"name",transformer:function(e,n){return r([n.prefix].concat(e.path).join(" "))}},"name/cti/constant":{type:"name",transformer:function(e,n){return r([n.prefix].concat(e.path).join(" ")).toUpperCase()}},"name/ti/constant":{type:"name",transformer:function(e,n){var t=e.path.slice(1);return r([n.prefix].concat(t).join(" ")).toUpperCase()}},"name/cti/pascal":{type:"name",transformer:function(e,t){return i(n([t.prefix].concat(e.path).join(" ")))}},"color/rgb":{type:"value",matcher:b,transformer:function(n){return e(n.value).toRgbString()}},"color/hsl":{type:"value",matcher:b,transformer:function(n){return e(n.value).toHslString()}},"color/hsl-4":{type:"value",matcher:b,transformer:function(n){var t=e(n.value),r=t.toHsl(),i=`${Math.round(r.h)} ${Math.round(100*r.s)}% ${Math.round(100*r.l)}%`;return 1===t.getAlpha()?`hsl(${i})`:`hsl(${i} / ${r.a})`}},"color/hex":{type:"value",matcher:b,transformer:function(n){return e(n.value).toHexString()}},"color/hex8":{type:"value",matcher:b,transformer:function(n){return e(n.value).toHex8String()}},"color/hex8android":{type:"value",matcher:b,transformer:function(n){var t=e(n.value).toHex8();return"#"+t.slice(6)+t.slice(0,6)}},"color/UIColor":{type:"value",matcher:b,transformer:function(n){var t=e(n.value).toRgb();return"[UIColor colorWithRed:"+(t.r/255).toFixed(3)+"f green:"+(t.g/255).toFixed(3)+"f blue:"+(t.b/255).toFixed(3)+"f alpha:"+t.a.toFixed(3)+"f]"}},"color/UIColorSwift":{type:"value",matcher:b,transformer:function(n){const{r:t,g:r,b:i,a:o}=e(n.value).toRgb();return`UIColor(red: ${(t/255).toFixed(3)}, green: ${(r/255).toFixed(3)}, blue: ${(i/255).toFixed(3)}, alpha:${o})`}},"color/css":{type:"value",matcher:b,transformer:function(n){var t=e(n.value);return 1===t.getAlpha()?t.toHexString():t.toRgbString()}},"color/sketch":{type:"value",matcher:e=>"color"===e.attributes.category,transformer:function(n){let t=e(n.original.value).toRgb();return{red:(t.r/255).toFixed(5),green:(t.g/255).toFixed(5),blue:(t.b/255).toFixed(5),alpha:t.a}}},"size/sp":{type:"value",matcher:A,transformer:function(e){const n=parseFloat(e.value);return isNaN(n)&&O(e.name,e.value,"sp"),n.toFixed(2)+"sp"}},"size/dp":{type:"value",matcher:N,transformer:function(e){const n=parseFloat(e.value);return isNaN(n)&&O(e.name,e.value,"dp"),n.toFixed(2)+"dp"}},"size/remToSp":{type:"value",matcher:A,transformer:function(e){const n=parseFloat(e.value);return isNaN(n)&&O(e.name,e.value,"sp"),(16*n).toFixed(2)+"sp"}},"size/remToDp":{type:"value",matcher:N,transformer:function(e){const n=parseFloat(e.value);return isNaN(n)&&O(e.name,e.value,"dp"),(16*n).toFixed(2)+"dp"}},"size/px":{type:"value",matcher:S,transformer:function(e){const n=parseFloat(e.value);return isNaN(n)&&O(e.name,e.value,"px"),n+"px"}},"size/rem":{type:"value",matcher:S,transformer:function(e){const n=parseFloat(e.value);return isNaN(n)&&O(e.name,e.value,"rem"),n+"rem"}},"size/remToPt":{type:"value",matcher:S,transformer:function(e){const n=parseFloat(e.value);return isNaN(n)&&O(e.name,e.value,"pt"),(16*n).toFixed(2)+"f"}},"size/swift/remToCGFloat":{type:"value",matcher:S,transformer:function(e){const n=parseFloat(e.value);return isNaN(n)&&O(e.name,e.value,"CGFloat"),`CGFloat(${(16*n).toFixed(2)})`}},"size/remToPx":{type:"value",matcher:S,transformer:function(e){const n=parseFloat(e.value);return isNaN(n)&&O(e.name,e.value,"px"),(16*n).toFixed(0)+"px"}},"content/icon":{type:"value",matcher:function(e){return"content"===e.attributes.category&&"icon"===e.attributes.type},transformer:function(e){return e.value.replace(v,(function(e,n){return"'\\"+n+"'"}))}},"content/quote":{type:"value",matcher:x,transformer:function(e){return F("'",e)}},"content/objC/literal":{type:"value",matcher:x,transformer:function(e){return"@"+L(e)}},"content/swift/literal":{type:"value",matcher:x,transformer:L},"font/objC/literal":{type:"value",matcher:function(e){return"font"===e.attributes.category},transformer:function(e){return"@"+L(e)}},"font/swift/literal":{type:"value",matcher:function(e){return"font"===e.attributes.category},transformer:L},"time/seconds":{type:"value",matcher:function(e){return"time"===e.attributes.category},transformer:function(e){return(parseFloat(e.value)/1e3).toFixed(2)+"s"}},"asset/base64":{type:"value",matcher:I,transformer:function(e){return btoa(e.value)}},"asset/path":{type:"value",matcher:I,transformer:function(e){return new URL(e.value,location.href).href}},"asset/objC/literal":{type:"value",matcher:I,transformer:function(e){return"@"+L(e)}},"asset/swift/literal":{type:"value",matcher:I,transformer:L},"color/hex8flutter":{type:"value",matcher:b,transformer:function(n){var t=e(n.value).toHex8().toUpperCase();return`Color(0x${t.slice(6)}${t.slice(0,6)})`}},"content/flutter/literal":{type:"value",matcher:x,transformer:L},"asset/flutter/literal":{type:"value",matcher:I,transformer:L},"font/flutter/literal":{type:"value",matcher:function(e){return"font"===e.attributes.category},transformer:L},"size/flutter/remToDouble":{type:"value",matcher:S,transformer:function(e){return(16*parseFloat(e.value,10)).toFixed(2)}}},C="<% _.forIn(properties && properties.asset && properties.asset.font, function(font) {\n  var fileFormatArr = [];\n  if (font.eot) {\n  \tfileFormatArr.push(\"url('../\" + font.eot.value + \"');\\n\\tsrc: url('../\" + font.eot.value + \"?#iefix') format('embedded-opentype')\");\n  }\n  if (font.otf) {\n  \tfileFormatArr.push(\"url('../\" + font.otf.value + \"') format('otf')\");\n  }\n  if (font.ttf) {\n  \tfileFormatArr.push(\"url('../\" + font.ttf.value + \"') format('truetype')\");\n  }\n  if (font.svg) {\n  \tfileFormatArr.push(\"url('../\" + font.svg.value + \"#\" + font.name.value.replace(/ /g,'%20') + \"') format('svg')\");\n  }\n  if (font.woff) {\n  \tfileFormatArr.push(\"url('../\" + font.woff.value + \"') format('woff')\");\n  }\n  if (font.woff2) {\n  \tfileFormatArr.push(\"url('../\" + font.woff2.value + \"') format('woff2')\");\n  }\n%>\n@font-face {\n  font-family: \"<%= font.name.value %>\";\n  src: <%= fileFormatArr.join(',\\n\\t\\t') %>;<% if (font.style) { %>\n  font-style: <%= font.style.value %>;<% } if (font.weight) { %>\n  font-weight: <%= font.weight.value %>;<% } %>\n}\n<% }); %>\n",E="<%\n//\n// Copyright 2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\").\n// You may not use this file except in compliance with the License.\n// A copy of the License is located at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// or in the \"license\" file accompanying this file. This file is distributed\n// on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n// express or implied. See the License for the specific language governing\n// permissions and limitations under the License.\n\n%>\n<%\n    // for backward compatibility we need to have the user explicitly hide it\n    var showFileHeader = (this.options && this.options.hasOwnProperty('showFileHeader')) ? this.options.showFileHeader : true;\n    if(showFileHeader) {\n        var header = '';\n        header += \"/*\\n  Do not edit directly\";\n        header += \"\\n  Generated on \" + new Date().toUTCString();\n        header += \"\\n*/\\n\";\n        print(header);\n    }\n\n    print(\"\\n\");\n\n    // output the list of tokens as Sass variables\n    //\n   allProperties.forEach(function(prop) {\n        var output = '';\n        output += '$' + prop.name + ': ' + (prop.attributes.category==='asset' ? '\"'+prop.value+'\"' : prop.value) + ' !default;'\n        if(prop.comment) {\n        output += ' // ' + prop.comment;\n        }\n        output += '\\n';\n        print(output);\n    });\n\n    print('\\n');\n\n    // output the list of tokens as a Sass nested map\n    // (the values are pointing to the variables)\n    //\n    print(`$${this.mapName||'tokens'}: ${processJsonNode(properties, 0)};\\n`);\n\n    // recursive function to process a properties JSON node\n    //\n    function processJsonNode(obj, depth) {\n        var output = '';\n        if (obj.hasOwnProperty('value')) {\n            // if we have found a leaf (a property with a value) append the value\n            output += `$${obj.name}`;\n        } else {\n            // if we have found a group of properties, use the Sass group \"(...)\" syntax and loop -recursively- on the children\n            output += '(\\n'\n            output += Object.keys(obj).map(function(newKey) {\n            var newProp = obj[newKey];\n            var indent = '  '.repeat(depth+1);\n            return `${indent}'${newKey}': ${processJsonNode(newProp, depth + 1)}`;\n            }).join(',\\n');\n            output += '\\n' + '  '.repeat(depth) + ')';\n        }\n        return output;\n    }\n%>",R='<%\n//\n// Copyright 2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the "License").\n// You may not use this file except in compliance with the License.\n// A copy of the License is located at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// or in the "license" file accompanying this file. This file is distributed\n// on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n// express or implied. See the License for the specific language governing\n// permissions and limitations under the License.\n\nvar props = allProperties.filter(function(prop) {\n  return prop.attributes.category !== \'asset\' &&\n         prop.attributes.category !== \'border\' &&\n         prop.attributes.category !== \'shadow\' &&\n         prop.attributes.category !== \'transition\';\n}); %>\n<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">\n<%\n    // for backward compatibility we need to have the user explicitly hide it\n    var showFileHeader = (this.options && this.options.hasOwnProperty(\'showFileHeader\')) ? this.options.showFileHeader : true;\n    if(showFileHeader) {\n        print("\x3c!--\\n  Do not edit directly");\n        print("\\n  Generated on " + new Date().toUTCString());\n        print("\\n--\x3e");\n    }\n%>\n<plist version="1.0">\n  <dict>\n    <% props.forEach(, function(prop) {\n    %><key><%= prop.name %></key>\n    <% if (prop.attributes.category === \'color\') { %><dict>\n      <key>r</key>\n      <real><%= prop.value[0]/255 %></real>\n      <key>g</key>\n      <real><%= prop.value[1]/255 %></real>\n      <key>b</key>\n      <real><%= prop.value[2]/255 %></real>\n      <key>a</key>\n      <real>1</real>\n      </dict>\n    <% } else if (prop.attributes.category === \'size\') { %></dict>\n      <integer><%= prop.value %></integer>\n    <% } else { %></dict>\n      <string><%= prop.value %></string>\n    <% } %><% if (prop.comment) { %>\x3c!-- <%= prop.comment %> --\x3e<% } %><% }); %>\n  </dict>\n</plist>\n',D="<%\n//\n// Copyright 2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\").\n// You may not use this file except in compliance with the License.\n// A copy of the License is located at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// or in the \"license\" file accompanying this file. This file is distributed\n// on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n// express or implied. See the License for the specific language governing\n// permissions and limitations under the License.\n%>\n//\n// <%= this.destination %>\n//\n<%\n    // for backward compatibility we need to have the user explicitly hide it\n    var showFileHeader = (this.options && this.options.hasOwnProperty('showFileHeader')) ? this.options.showFileHeader : true;\n    if(showFileHeader) {\n        print(\"// Do not edit directly\\n\");\n        print(\"// Generated on \" + new Date().toUTCString());\n    }\n%>\n//\n\n#import \"<%= this.className %>.h\"\n<%  var props = allProperties.filter(this.filter); %>\n\n<% props.forEach(, function(prop) {  %>\nNSString * const <%= prop.name %> = <%= prop.value %>;<% }); %>\n\n@implementation <%= this.className %>\n\n+ (NSArray *)values {\n  static NSArray* array;\n  static dispatch_once_t onceToken;\n\n  dispatch_once(&onceToken, ^{\n    array = @[\n      <%= props.map(buildProperty).join(',\\n') %>\n    ];\n  });\n\n  return array;\n}\n\n@end\n\n<% function buildProperty(prop) {\n  var to_ret = '@{\\n';\n  to_ret += '  ' + '@\"value\": ' + prop.value + ',\\n';\n  to_ret += '  ' + '@\"name\": @\"' + prop.name + '\",\\n';\n\n  for(var name in prop.attributes) {\n    if (prop.attributes[name]) {\n      to_ret += '    ' + '@\"' + name + '\": @\"' + prop.attributes[name] + '\",\\n';\n    }\n  }\n\n  // remove last comma\n  return to_ret.slice(0, -2) + '\\n' + '  ' + '}';\n} %>\n",P='<%\n//\n// Copyright 2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the "License").\n// You may not use this file except in compliance with the License.\n// A copy of the License is located at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// or in the "license" file accompanying this file. This file is distributed\n// on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n// express or implied. See the License for the specific language governing\n// permissions and limitations under the License.\n%>\n//\n// <%= this.destination %>\n//\n<%\n    // for backward compatibility we need to have the user explicitly hide it\n    var showFileHeader = (this.options && this.options.hasOwnProperty(\'showFileHeader\')) ? this.options.showFileHeader : true;\n    if(showFileHeader) {\n        print("// Do not edit directly\\n");\n        print("// Generated on " + new Date().toUTCString());\n    }\n%>\n//\n\n#import <UIKit/UIKit.h>\n<% var props = allProperties.filter(this.filter); %>\n\ntypedef NS_ENUM(NSInteger, <%= this.type %>) {\n<%= props.map(function(prop) { return prop.name; }).join(\',\\n\') %>\n};\n\n@interface <%= this.className %> : NSObject\n+ (NSArray *)values;\n+ (UIColor *)color:(<%= this.type %>)color;\n@end\n',H="<%\n//\n// Copyright 2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\").\n// You may not use this file except in compliance with the License.\n// A copy of the License is located at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// or in the \"license\" file accompanying this file. This file is distributed\n// on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n// express or implied. See the License for the specific language governing\n// permissions and limitations under the License.\n%>\n//\n// <%= this.destination %>\n//\n<%\n    // for backward compatibility we need to have the user explicitly hide it\n    var showFileHeader = (this.options && this.options.hasOwnProperty('showFileHeader')) ? this.options.showFileHeader : true;\n    if(showFileHeader) {\n        print(\"// Do not edit directly\\n\");\n        print(\"// Generated on \" + new Date().toUTCString());\n    }\n%>\n//\n\n#import \"<%= this.className %>.h\"\n\n@implementation <%= this.className %>\n\n+ (NSDictionary *)getProperty:(NSString *)keyPath {\n  return [[self properties] valueForKeyPath:keyPath];\n}\n\n+ (nonnull)getValue:(NSString *)keyPath {\n  return [[self properties] valueForKeyPath:[NSString stringWithFormat:@\"%@.value\", keyPath]];\n}\n\n+ (NSDictionary *)properties {\n  static NSDictionary * dictionary;\n  static dispatch_once_t onceToken;\n\n  dispatch_once(&onceToken, ^{\n    dictionary = <%= buildDictionary(properties) %>;\n  });\n\n  return dictionary;\n}\n\n@end\n\n<% function buildDictionary(props, indent) {\n  indent = indent || '  ';\n  var to_ret = '@{\\n';\n  if (props.hasOwnProperty('value')) {\n    var value = props.attributes.category === 'size' || props.attributes.category === 'time' ? '@' + props.value : props.value;\n    to_ret += indent + '@\"value\": ' + value + ',\\n';\n    to_ret += indent + '@\"name\": @\"' + props.name + '\",\\n';\n\n    for(var name in props.attributes) {\n      if (props.attributes[name]) {\n        to_ret += indent + '@\"' + name + '\": @\"' + props.attributes[name] + '\",\\n';\n      }\n    }\n\n    // remove last comma\n    return to_ret.slice(0, -2) + '\\n' + indent + '}';\n  } else {\n    for(var name in props) {\n      to_ret += indent + '@\"' + name + '\": ' + buildDictionary(props[name], indent + '  ') + ',\\n';\n    }\n    // remove last comma\n    return to_ret.slice(0, -2) + '\\n' + indent + '}';\n  }\n} %>\n",k='<%\n//\n// Copyright 2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the "License").\n// You may not use this file except in compliance with the License.\n// A copy of the License is located at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// or in the "license" file accompanying this file. This file is distributed\n// on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n// express or implied. See the License for the specific language governing\n// permissions and limitations under the License.\n%>\n//\n// <%= this.destination %>\n//\n<%\n    // for backward compatibility we need to have the user explicitly hide it\n    var showFileHeader = (this.options && this.options.hasOwnProperty(\'showFileHeader\')) ? this.options.showFileHeader : true;\n    if(showFileHeader) {\n        print("// Do not edit directly\\n");\n        print("// Generated on " + new Date().toUTCString());\n    }\n%>\n//\n\n#import "<%= this.className %>.h"\n<%  var props = allProperties.filter(this.filter);\n    var type = this.type; %>\n\n<% props.forEach(, function(prop) {  %>\n<%= type %> const <%= prop.name %> = <%= prop.value %>;<% }); %>\n',j='<%\n//\n// Copyright 2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the "License").\n// You may not use this file except in compliance with the License.\n// A copy of the License is located at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// or in the "license" file accompanying this file. This file is distributed\n// on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n// express or implied. See the License for the specific language governing\n// permissions and limitations under the License.\n%>\n//\n// <%= this.destination %>\n//\n<%\n    // for backward compatibility we need to have the user explicitly hide it\n    var showFileHeader = (this.options && this.options.hasOwnProperty(\'showFileHeader\')) ? this.options.showFileHeader : true;\n    if(showFileHeader) {\n        print("// Do not edit directly\\n");\n        print("// Generated on " + new Date().toUTCString());\n    }\n%>\n//\n\n#import "<%= this.className %>.h"\n<% var props = allProperties.filter(this.filter); %>\n\n@implementation <%= this.className %>\n\n+ (UIColor *)color:(<%= this.type %>)colorEnum{\n  return [[self values] objectAtIndex:colorEnum];\n}\n\n+ (NSArray *)values {\n  static NSArray* colorArray;\n  static dispatch_once_t onceToken;\n\n  dispatch_once(&onceToken, ^{\n    colorArray = @[\n<%= props.map(function(prop){ return prop.value; }).join(\',\\n\') %>\n    ];\n  });\n\n  return colorArray;\n}\n\n@end\n',U='<%\n//\n// Copyright 2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the "License").\n// You may not use this file except in compliance with the License.\n// A copy of the License is located at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// or in the "license" file accompanying this file. This file is distributed\n// on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n// express or implied. See the License for the specific language governing\n// permissions and limitations under the License.\n%>\n//\n// <%= this.destination %>\n//\n<%\n    // for backward compatibility we need to have the user explicitly hide it\n    var showFileHeader = (this.options && this.options.hasOwnProperty(\'showFileHeader\')) ? this.options.showFileHeader : true;\n    if(showFileHeader) {\n        print("// Do not edit directly\\n");\n        print("// Generated on " + new Date().toUTCString());\n    }\n%>\n//\n\n#import <Foundation/Foundation.h>\n#import <UIKit/UIKit.h>\n\n@interface <%= this.className %> : NSObject\n\n+ (NSDictionary *)properties;\n+ (NSDictionary *)getProperty:(NSString *)keyPath;\n+ (nonnull)getValue:(NSString *)keyPath;\n\n@end\n',$='<%\n//\n// Copyright 2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the "License").\n// You may not use this file except in compliance with the License.\n// A copy of the License is located at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// or in the "license" file accompanying this file. This file is distributed\n// on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n// express or implied. See the License for the specific language governing\n// permissions and limitations under the License.\n//\n%>\n// <%= this.destination %>\n//\n<%\n    // for backward compatibility we need to have the user explicitly hide it\n    var showFileHeader = (this.options && this.options.hasOwnProperty(\'showFileHeader\')) ? this.options.showFileHeader : true;\n    if(showFileHeader) {\n        print("// Do not edit directly\\n");\n        print("// Generated on " + new Date().toUTCString());\n    }\n%>\n//\n\n#import <Foundation/Foundation.h>\n<% var props = allProperties.filter(this.filter);\n   var type = this.type; %>\n\n<% props.forEach(, function(prop) {  %>\nextern <%= type %> const <%= prop.name %>;<% }); %>\n',W='<%\n//\n// Copyright 2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the "License").\n// You may not use this file except in compliance with the License.\n// A copy of the License is located at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// or in the "license" file accompanying this file. This file is distributed\n// on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n// express or implied. See the License for the specific language governing\n// permissions and limitations under the License.\n%>\n//\n// <%= this.destination %>\n//\n<%\n    // for backward compatibility we need to have the user explicitly hide it\n    var showFileHeader = (this.options && this.options.hasOwnProperty(\'showFileHeader\')) ? this.options.showFileHeader : true;\n    if(showFileHeader) {\n        print("// Do not edit directly\\n");\n        print("// Generated on " + new Date().toUTCString());\n    }\n%>\n//\n\n#import <Foundation/Foundation.h>\n#import <UIKit/UIKit.h>\n\n<% var props = allProperties.filter(this.filter); %>\n\n<% props.forEach(, function(prop) {\n  %>#define <%= prop.name %> <%= prop.value %>\n<% }); %>\n',z='<%\n//\n// Copyright 2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the "License").\n// You may not use this file except in compliance with the License.\n// A copy of the License is located at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// or in the "license" file accompanying this file. This file is distributed\n// on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n// express or implied. See the License for the specific language governing\n// permissions and limitations under the License.\n%>\n//\n// <%= this.destination %>\n//\n<%\n    // for backward compatibility we need to have the user explicitly hide it\n    var showFileHeader = (this.options && this.options.hasOwnProperty(\'showFileHeader\')) ? this.options.showFileHeader : true;\n    if(showFileHeader) {\n        print("// Do not edit directly\\n");\n        print("// Generated on " + new Date().toUTCString());\n    }\n%>\n//\n\n#import <Foundation/Foundation.h>\n<% var props = allProperties.filter(this.filter); %>\n\n<% props.forEach(, function(prop) {  %>\nextern NSString * const <%= prop.name %>;<% }); %>\n\n@interface <%= this.className %> : NSObject\n+ (NSArray *)values;\n@end\n',G='<%\n//\n// Copyright 2019 Alaska Air Group or its affiliates. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the "License").\n// You may not use this file except in compliance with the License.\n// A copy of the License is located at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// or in the "license" file accompanying this file. This file is distributed\n// on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n// express or implied. See the License for the specific language governing\n// permissions and limitations under the License.\n%>\n//\n// <%= this.destination %>\n//\n<%\n    // for backward compatibility we need to have the user explicitly hide it\n    var showFileHeader = (this.options && this.options.hasOwnProperty(\'showFileHeader\')) ? this.options.showFileHeader : true;\n    if(showFileHeader) {\n        print("// Do not edit directly\\n");\n        print("// Generated on " + new Date().toUTCString());\n    }\n%>\n//\n<%\n  // Filter to only those props wanted based on the filter, then sort\n  // them by category to keep like props together, then by name\n  // to make them easier to find alphabetically.\n  var props = _.sortBy(allProperties, item => item.attributes.category + item.name);\n%>\n\nimport UIKit\n\npublic class <%= this.className %> {\n    <%= props.map(function(prop) { return \'public static let \' + prop.name + \' = \' + prop.value; }).join(\'\\n    \') %>\n}\n',Y='<%\n//\n// Copyright 2019 Alaska Air Group or its affiliates. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the "License").\n// You may not use this file except in compliance with the License.\n// A copy of the License is located at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// or in the "license" file accompanying this file. This file is distributed\n// on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n// express or implied. See the License for the specific language governing\n// permissions and limitations under the License.\n%>\n//\n// <%= this.destination %>\n//\n<%\n    // for backward compatibility we need to have the user explicitly hide it\n    var showFileHeader = (this.options && this.options.hasOwnProperty(\'showFileHeader\')) ? this.options.showFileHeader : true;\n    if(showFileHeader) {\n        print("// Do not edit directly\\n");\n        print("// Generated on " + new Date().toUTCString());\n    }\n%>\n//\n<%\n  // Filter to only those props wanted based on the filter, then sort\n  // them by category to we keep like props together, then by name\n  // to make them easier to find alphabetically.\n  var props = _.sortBy(allProperties, item => item.attributes.category + item.name);\n%>\nimport UIKit\n\npublic enum <%= this.className %> {\n    <%= props.map(function(prop) { return \'public static let \' + prop.name + \' = \' + prop.value; }).join(\'\\n    \') %>\n}\n',K='<?xml version="1.0" encoding="UTF-8"?>\n<%\n//\n// Copyright 2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the "License").\n// You may not use this file except in compliance with the License.\n// A copy of the License is located at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// or in the "license" file accompanying this file. This file is distributed\n// on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n// express or implied. See the License for the specific language governing\n// permissions and limitations under the License.\n\nvar props = allProperties.filter(function(prop) {\n  return prop.attributes.category === \'time\';\n}); %>\n<%\n  // for backward compatibility we need to have the user explicitly hide it\n  var showFileHeader = (this.options && this.options.hasOwnProperty(\'showFileHeader\')) ? this.options.showFileHeader : true;\n  if(showFileHeader) {\n    print("\x3c!--\\n");\n    print("  Do not edit directly\\n");\n    print("  Generated on " + new Date().toUTCString() + "\\n");\n    print("--\x3e");\n  }\n%>\n<resources>\n  <% props.forEach(, function(prop) {\n  %><integer name="<%= prop.name %>"><%= prop.value %></integer><% if (prop.comment) { %>\x3c!-- <%= prop.comment %> --\x3e<% } %>\n  <% }); %>\n</resources>\n',_='<?xml version="1.0" encoding="UTF-8"?>\n<%\n//\n// Copyright 2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the "License").\n// You may not use this file except in compliance with the License.\n// A copy of the License is located at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// or in the "license" file accompanying this file. This file is distributed\n// on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n// express or implied. See the License for the specific language governing\n// permissions and limitations under the License.\n\nvar props = allProperties.filter(function(prop) {\n  return prop.attributes.category === \'size\' && prop.attributes.type !== \'font\'\n}); %>\n<%\n  // for backward compatibility we need to have the user explicitly hide it\n  var showFileHeader = (this.options && this.options.hasOwnProperty(\'showFileHeader\')) ? this.options.showFileHeader : true;\n  if(showFileHeader) {\n    print("\x3c!--\\n");\n    print("  Do not edit directly\\n");\n    print("  Generated on " + new Date().toUTCString() + "\\n");\n    print("--\x3e");\n  }\n%>\n<resources>\n  <%props.forEach(, function(prop) {\n  %><dimen name="<%= prop.name %>"><%= prop.value %></dimen><% if (prop.comment) { %>\x3c!-- <%= prop.comment %> --\x3e<% } %>\n  <% }); %>\n</resources>\n',V='<?xml version="1.0" encoding="UTF-8"?>\n<%\n//\n// Copyright 2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the "License").\n// You may not use this file except in compliance with the License.\n// A copy of the License is located at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// or in the "license" file accompanying this file. This file is distributed\n// on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n// express or implied. See the License for the specific language governing\n// permissions and limitations under the License.\n\nvar props = allProperties.filter(function(prop) {\n  return prop.attributes.category === \'content\';\n}); %>\n<%\n  // for backward compatibility we need to have the user explicitly hide it\n  var showFileHeader = (this.options && this.options.hasOwnProperty(\'showFileHeader\')) ? this.options.showFileHeader : true;\n  if(showFileHeader) {\n    print("\x3c!--\\n");\n    print("  Do not edit directly\\n");\n    print("  Generated on " + new Date().toUTCString() + "\\n");\n    print("--\x3e");\n  }\n%>\n<resources>\n  <% props.forEach(, function(prop) {\n  %><string name="<%= prop.name %>"><%= prop.value %></string><% if (prop.comment) { %>\x3c!-- <%= prop.comment %> --\x3e<% } %>\n  <% }); %>\n</resources>\n',B='<?xml version="1.0" encoding="UTF-8"?>\n<%\n//\n// Copyright 2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the "License").\n// You may not use this file except in compliance with the License.\n// A copy of the License is located at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// or in the "license" file accompanying this file. This file is distributed\n// on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n// express or implied. See the License for the specific language governing\n// permissions and limitations under the License.\n\nvar props = allProperties.filter(function(prop) {\n return prop.attributes.category === \'color\';\n});\n%>\n<%\n  // for backward compatibility we need to have the user explicitly hide it\n  var showFileHeader = (this.options && this.options.hasOwnProperty(\'showFileHeader\')) ? this.options.showFileHeader : true;\n  if(showFileHeader) {\n    print("\x3c!--\\n");\n    print("  Do not edit directly\\n");\n    print("  Generated on " + new Date().toUTCString() + "\\n");\n    print("--\x3e");\n  }\n%>\n<resources>\n  <% props.forEach(, function(prop) {\n  %><color name="<%= prop.name %>"><%= prop.value %></color><% if (prop.comment) { %>\x3c!-- <%= prop.comment %> --\x3e<% } %>\n  <% }); %>\n</resources>\n',J='<?xml version="1.0" encoding="UTF-8"?>\n<%\n//\n// Copyright 2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the "License").\n// You may not use this file except in compliance with the License.\n// A copy of the License is located at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// or in the "license" file accompanying this file. This file is distributed\n// on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n// express or implied. See the License for the specific language governing\n// permissions and limitations under the License.\n\nvar props = allProperties.filter(function(prop) {\n  return prop.attributes.category === \'size\' && prop.attributes.type === \'font\';\n}); %>\n<%\n  // for backward compatibility we need to have the user explicitly hide it\n  var showFileHeader = (this.options && this.options.hasOwnProperty(\'showFileHeader\')) ? this.options.showFileHeader : true;\n  if(showFileHeader) {\n    print("\x3c!--\\n");\n    print("  Do not edit directly\\n");\n    print("  Generated on " + new Date().toUTCString() + "\\n");\n    print("--\x3e");\n  }\n%>\n<resources>\n  <% props.forEach(, function(prop) {\n  %><dimen name="<%= prop.name %>"><%= prop.value %></dimen><% if (prop.comment) { %>\x3c!-- <%= prop.comment %> --\x3e<% } %>\n  <% }); %>\n</resources>\n',M='<%\n// Licensed under the Apache License, Version 2.0 (the "License").\n// You may not use this file except in compliance with the License.\n// A copy of the License is located at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// or in the "license" file accompanying this file. This file is distributed\n// on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n// express or implied. See the License for the specific language governing\n// permissions and limitations under the License.\n%>\n//\n// <%= this.destination %>\n//\n<%\n    // for backward compatibility we need to have the user explicitly hide it\n    var showFileHeader = (this.options && this.options.hasOwnProperty(\'showFileHeader\')) ? this.options.showFileHeader : true;\n    if(showFileHeader) {\n        print("// Do not edit directly\\n");\n        print("// Generated on " + new Date().toUTCString());\n    }\n%>\n//\n<%\n  // Filter to only those props wanted based on the filter, then sort\n  // them by category so we keep like props together, then by name\n  // so they are easier to find alphabetically.\n  var props = _.sortBy(allProperties, item => item.attributes.category + item.name);\n%>\n\nimport \'dart:ui\';\n\nclass <%= this.className %> {\n  <%= this.className %>._();\n  \n    <%= _.map(props, function(prop) { return \'static const \' + prop.name + \' = \' + prop.value + ";" }).join(\'\\n    \') %>\n}';function q(e,n){var t="";return(!e||e.showFileHeader)&&("short"===n?(t+="\n",t+="// Do not edit directly\n",t+="// Generated on "+(new Date).toUTCString()+"\n",t+="\n"):(t+="/**\n",t+=" * Do not edit directly\n",t+=" * Generated on "+(new Date).toUTCString()+"\n",t+=" */\n\n")),t}function Q(e,n,t){return n.map((function(n){var r=e+n.name+": "+("asset"===n.attributes.category?'"'+n.value+'"':n.value)+";";return n.comment&&(r="short"===t?r.concat(" // "+n.comment):r.concat(" /* "+n.comment+" */")),r})).filter((function(e){return!!e})).join("\n")}function X(e,n,t){return s(n).filter((function(e){return"content"===e.attributes.category&&"icon"===e.attributes.type})).map((function(n){return e+n.name+": "+n.value+";"+"\n"+("."+t.prefix+"-icon."+n.attributes.item+":before ")+("{ content: "+e+n.name+"; }")})).value().join("\n")}const Z=e=>"color"===e.attributes.category&&!!e.attributes.mode,ee=e=>e.allProperties.filter(Z).reduce((e,n)=>{const t=n.attributes.mode;return e[t]||(e[t]=[]),e[t].push(n),e},{});var ne={"css/variables":function(e){let n=`${q(this.options)}\n:root{\n${Q("  --",e.allProperties)}\n}`;for(const[t,r]of Object.entries(ee(e)))n+=`\n@media (prefers-color-scheme: ${t}){\n  :root{\n${r.map(e=>`    --${e.name.replace("-"+t,"")}: var(--${e.name});`).join("\n")}\n  }\n}`;return n},"scss/map-flat":o("<%\n//\n// Copyright 2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\").\n// You may not use this file except in compliance with the License.\n// A copy of the License is located at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// or in the \"license\" file accompanying this file. This file is distributed\n// on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n// express or implied. See the License for the specific language governing\n// permissions and limitations under the License.\n\n%>\n<%\n    // for backward compatibility we need to have the user explicitly hide it\n    var showFileHeader = (this.options && this.options.hasOwnProperty('showFileHeader')) ? this.options.showFileHeader : true;\n    if(showFileHeader) {\n        var header = '';\n        header += \"/*\\n  Do not edit directly\";\n        header += \"\\n  Generated on \" + new Date().toUTCString();\n        header += \"\\n*/\\n\";\n        print(header);\n    }\n\n    print('\\n');\n\n    var output = '';\n    output += `$${this.mapName||'tokens'}: (\\n`;\n    output += allProperties.map(function(prop){\n        var line = '';\n        if(prop.comment) {\n        line += '  // ' + prop.comment + '\\n';\n        }\n        line += '  \\'' + prop.name + '\\': ' + (prop.attributes.category==='asset' ? '\"'+prop.value+'\"' : prop.value)\n        return line;\n    }).join(',\\n');\n    output += '\\n);';\n    print(output);\n%>\n"),"scss/map-deep":o(E),"scss/variables":function(e){let n=`${q(this.options,"short")}\n${Q("$",e.allProperties,"short")}`;for(const[t,r]of Object.entries(ee(e)))n+=`\n@media (prefers-color-scheme: ${t}){\n${r.map(e=>`  $${e.name.replace("-"+t,"")}: $${e.name};`).join("\n")}\n}`;return n},"scss/icons":function(e,n){return q(this.options,"short")+X("$",e.allProperties,n)},"less/variables":function(e){return q(this.options,"short")+Q("@",e.allProperties,"short")},"less/icons":function(e,n){return q(this.options,"short")+X("@",e.allProperties,n)},"javascript/properties":({allProperties:e})=>"export default "+JSON.stringify(e,null," "),"javascript/module":function(e){return q(this.options)+"module.exports = "+JSON.stringify(e.properties,null,2)+";"},"javascript/object":function(e){return q(this.options)+"var "+(this.name||"_styleDictionary")+" = "+JSON.stringify(e.properties,null,2)+";"},"javascript/umd":function(e){var n=this.name||"_styleDictionary";return q(this.options)+'(function(root, factory) {\n  if (typeof module === "object" && module.exports) {\n    module.exports = factory();\n  } else if (typeof exports === "object") {\n    exports["'+n+'"] = factory();\n  } else if (typeof define === "function" && define.amd) {\n    define([], factory);\n  } else {\n    root["'+n+'"] = factory();\n  }\n}(this, function() {\n  return '+JSON.stringify(e.properties,null,2)+";\n}))\n"},"javascript/es6":function(e){return q(this.options)+e.allProperties.map((function(e){var n="export const "+e.name+" = "+JSON.stringify(e.value)+";";return e.comment&&(n=n.concat(" // "+e.comment)),n})).join("\n")},"android/colors":o(B),"android/dimens":o(_),"android/fontDimens":o(J),"android/integers":o(K),"android/strings":o(V),"ios/macros":o(W),"ios/plist":o(R),"ios/singleton.m":o(H),"ios/singleton.h":o(U),"ios/static.h":o($),"ios/static.m":o(k),"ios/colors.h":o(P),"ios/colors.m":o(j),"ios/strings.h":o(z),"ios/strings.m":o(D),"ios-swift/class.swift":o(G),"ios-swift/enum.swift":o(Y),"css/fonts.css":o(C),json:function(e){return JSON.stringify(e.properties,null,2)},"json/asset":function(e){return JSON.stringify({asset:e.properties.asset},null,2)},"json/nested":function(e){return JSON.stringify(function e(n){if("object"!=typeof n||Array.isArray(n))return n;var t={};if(n.hasOwnProperty("value"))return n.value;for(var r in n)n.hasOwnProperty(r)&&(t[r]=e(n[r]));return t}(e.properties),null,2)},"json/flat":function(e){return"{\n"+e.allProperties.map((function(e){return`  "${e.name}": ${JSON.stringify(e.value)}`})).join(",\n")+"\n}"},"sketch/palette":function(e){var n={compatibleVersion:"1.0",pluginVersion:"1.1"};return n.colors=s(e.allProperties).filter((function(e){return"color"===e.attributes.category&&"base"===e.attributes.type})).map((function(e){return e.value})).value(),JSON.stringify(n,null,2)},"sketch/palette/v2":function(e){var n={compatibleVersion:"2.0",pluginVersion:"2.2",colors:e.allProperties.map((function(e){return Object.assign({name:e.name},e.value)}))};return JSON.stringify(n,null,2)},"flutter/class.dart":o(M)};const te=["name","value","attribute"];var re={};const ie=function(e){return e&&re[e]||[]},oe=function(e){e&&re[e]&&delete re[e]};var se,ae,pe,ce=oe,le=ie,he=function(e){return re[e]?re[e].length:0},fe=function(e,n){e&&(re[e]||(re[e]=[]),-1===re[e].indexOf(n)&&re[e].push(n))},ue=function(e){var n=ie(e);return oe(e),n},me={PropertyReferenceWarnings:"Property Reference Errors",PropertyValueCollisions:"Property Value Collisions",TemplateDeprecationWarnings:"Template Deprecation Warnings",RegisterTemplateDeprecationWarnings:"Register Template Deprecation Warnings",SassMapFormatDeprecationWarnings:"Sass Map Format Deprecation Warnings",MissingRegisterTransformErrors:"Missing Register Transform Errors",PropertyNameCollisionWarnings:"Property Name Collision Warnings"},de=me.PropertyReferenceWarnings,ye=[],ge={opening_character:"{",closing_character:"}",separator:".",ignoreKeys:["original"]};function we(e,n){if(pe=p({},ge,n),se=c(e),ae=new RegExp("\\"+pe.opening_character+"([^"+pe.closing_character+"]+)\\"+pe.closing_character,"g"),"object"==typeof e)return ye=[],function e(n){var t;for(t in n)n.hasOwnProperty(t)&&(pe.ignoreKeys||[]).indexOf(t)<0&&(ye.push(t),"object"==typeof n[t]?e(n[t]):"string"==typeof n[t]&&n[t].indexOf("{")>-1&&(n[t]=be(n[t],[ye.join(".")])),ye.pop());return n}(se);throw new Error("Please pass an object in")}var ve={};function be(e,n){var t,r;return e.replace(ae,(function(i,o){if(n.push(o),void 0!==(r=function(e,n){var t,r=n,i=e.split(pe.separator),o=ye.join(pe.separator);for(t=0;t<i.length;t++){if(void 0===r[i[t]]){r=void 0;break}r=r[i[t]]}if(void 0!==r)return r;fe(de,"Reference doesn't exist: "+o+" tries to reference "+e+", which is not defined")}(o.trim(),se)))if("string"==typeof r){if((t=e.replace(i,r)).indexOf("{")>-1){var s=t.slice(1,-1);if(ve.hasOwnProperty(s));else if(-1!==n.indexOf(s)){var a=n.indexOf(s),p=n.slice(a);p.forEach((function(e){ve[e]=!0})),p.push(s),fe(de,"Circular definition cycle:  "+p.join(", "))}else t=be(t,n)}}else t=r;else t=e;return n.pop(o),t})),t}function Se(e,n){for(var t=l(e),r=n.transforms,i=0;i<r.length;i++){var o=r[i];o.matcher&&!o.matcher(t)||("name"===o.type&&(t.name=o.transformer(t,n)),"value"===o.type&&(!h(e.value)||e.value.indexOf("{")<0)&&(t.value=o.transformer(t,n)),"attribute"===o.type&&(t.attributes=p({},t.attributes,o.transformer(t,n))))}return t}function Ae(e,n,t){if(!e&&!f(e))throw new Error("Property object must be an object");if(!n||!h(n))throw new Error("Name must be a string");if(!t||!a(t))throw new Error("Path must be an array");var r=l(e);return e.original||(r.original=l(e),r.name=r.name||n||"",r.attributes=r.attributes||{},r.path=l(t)),r}var Ne=me.TemplateDeprecationWarnings,Ie=me.MissingRegisterTransformErrors;function xe(e,n,t){var r=l(e),i=[];if(r.transforms)i=r.transforms;else if(r.transformGroup){if(!n.transformGroup[r.transformGroup]){let e=`\nUnknown transformGroup "${r.transformGroup}" found in platform "${t}":\n"${r.transformGroup}" does not match the name of a registered transformGroup.\n`;throw new Error(e)}i=n.transformGroup[r.transformGroup]}r.transforms=i.map((function(e){return n.transform[e]||fe(Ie,`"${e}"`),n.transform[e]}));let o=he(Ie);if(o>0){var s=ue(Ie).join(", ");let e;throw e=1==o?`\nUnknown transform ${s} found in platform "${t}":\n${s} does not match the name of a registered transform.\n`:`\nUnknown transforms ${s} found in platform "${t}":\nNone of ${s} match the name of a registered transform.\n`,new Error(e)}return r.files=(e.files||[]).map((function(e){const t={};if(e.filter)if("string"==typeof e.filter){if(!n.filter[e.filter])throw new Error("Can't find filter: "+e.filter);t.filter=n.filter[e.filter]}else if("object"==typeof e.filter)t.filter=u(e.filter);else{if("function"!=typeof e.filter)throw new Error("Filter format not valid: "+typeof e.filter);t.filter=e.filter}if(e.template){if(!n.format[e.template])throw new Error("Can't find template: "+e.template);fe(Ne,`${e.destination} (template: ${e.template})`),t.format=n.format[e.template]}else{if(!e.format)throw new Error("Please supply a format for file: "+JSON.stringify(e));if(!n.format[e.format])throw new Error("Can't find format: "+e.format);t.format=n.format[e.format]}return p({},e,t)})),r.actions=(e.actions||[]).map((function(e){return"function"!=typeof n.action[e].undo&&console.warn(e+" action does not have a clean function!"),n.action[e]})),r}var Fe=me.PropertyReferenceWarnings;function Le(e,n){for(var t in n=n||[],e)e.hasOwnProperty(t)&&(f(e[t])&&"value"in e[t]?n.push(e[t]):f(e[t])&&Le(e[t],n));return n}function Oe(e,n){return y(e,(e,t,r)=>{if(g(t)){if(t.value)return n(t)?m(e,{[r]:t}):e;{const i=Oe(t,n);return w(i)?e:m(e,{[r]:i})}}return e},{})}function Te(e,n){return d(e,n)}function Ce(e,n,t,r,i){if("function"!=typeof n)throw new Error("Please enter a valid file format");if("string"!=typeof e)throw new Error("Please enter a valid destination");var o=e;t.buildPath&&(o=t.buildPath+o);var s=function(e,n){return n?m({},e,{allProperties:Te(e.allProperties,n),properties:Oe(e.properties,n)}):e}(r,i),a={};s.allProperties&&s.allProperties.forEach(e=>{let n=e.name;a[n]||(a[n]=[]),a[n].push(e)});var p=me.PropertyNameCollisionWarnings+":"+e;if(ce(p),Object.keys(a).forEach(e=>{if(a[e].length>1){let n=a[e].map(e=>e.path.join(".")+"   "+e.value).join("\n        ");fe(p,`Output name ${e} was generated by:\n        ${n}`)}}),he(p)>0){let n=`${`While building ${e}, token collisions were found; output may be unexpected.`}\n    ${le(p).join("\n    ")}\n${["This many-to-one issue is usually caused by some combination of:","* conflicting or similar paths/names in property definitions","* platform transforms/transformGroups affecting names, especially when removing specificity","* overly inclusive file filters"].join("\n    ")}`;console.warn(n)}return{[o]:n(s,t)}}function Ee(e,n){if(n.buildPath&&"/"!==n.buildPath.slice(-1))throw new Error("Build path must end in a trailing slash or you will get weird file names.");return n.files.map(t=>Ce(t.destination,t.format.bind(t),n,e,t.filter)).reduce((e,n)=>Object.assign(e,n),{})}var Re={properties:{},allProperties:[],options:{},transform:T,transformGroup:{web:["attribute/cti","name/cti/kebab","size/px"],tokens:["attribute/cti","attribute/color","name/cti/kebab"],js:["attribute/cti","name/cti/pascal","size/rem","color/hex"],scss:["attribute/cti","name/cti/kebab","time/seconds","content/icon","size/rem","color/css"],css:["attribute/cti","name/cti/kebab","time/seconds","content/icon","size/rem","color/css"],less:["attribute/cti","name/cti/kebab","time/seconds","content/icon","size/rem","color/hex"],html:["attribute/cti","attribute/color","name/human"],android:["attribute/cti","name/cti/snake","color/hex8android","size/remToSp","size/remToDp"],ios:["attribute/cti","name/cti/pascal","color/UIColor","content/objC/literal","asset/objC/literal","size/remToPt","font/objC/literal"],"ios-swift":["attribute/cti","name/cti/camel","color/UIColorSwift","content/swift/literal","asset/swift/literal","size/swift/remToCGFloat","font/swift/literal"],"ios-swift-separate":["attribute/cti","name/ti/camel","color/UIColorSwift","content/swift/literal","asset/swift/literal","size/swift/remToCGFloat","font/swift/literal"],assets:["attribute/cti"],flutter:["attribute/cti","name/cti/camel","color/hex8flutter","size/flutter/remToDouble","content/flutter/literal","asset/flutter/literal","font/flutter/literal"],"flutter-separate":["attribute/cti","name/ti/camel","color/hex8flutter","size/flutter/remToDouble","content/flutter/literal","asset/flutter/literal","font/flutter/literal"]},format:ne,action:{},filter:{},registerTransform:function(e){if("string"!=typeof e.type)throw new Error("type must be a string");if(te.indexOf(e.type)<0)throw new Error(e.type+" type is not one of: "+te.join(", "));if("string"!=typeof e.name)throw new Error("name must be a string");if(e.matcher&&"function"!=typeof e.matcher)throw new Error("matcher must be a function");if("function"!=typeof e.transformer)throw new Error("transformer must be a function");return this.transform[e.name]={type:e.type,matcher:e.matcher,transformer:e.transformer},this},registerTransformGroup:function(e){if("string"!=typeof e.name)throw new Error("transform name must be a string");if(!a(e.transforms))throw new Error("transforms must be an array of registered value transforms");return e.transforms.forEach(function(e){if(!(e in this.transform))throw new Error("transforms must be an array of registered value transforms")}.bind(this)),this.transformGroup[e.name]=e.transforms,this},registerFormat:function(e){if("string"!=typeof e.name)throw new Error("Can't register format; format.name must be a string");if("function"!=typeof e.formatter)throw new Error("Can't register format; format.formatter must be a function");return this.format[e.name]=e.formatter,this},registerAction:function(e){if("string"!=typeof e.name)throw new Error("name must be a string");if("function"!=typeof e.do)throw new Error("do must be a function");return this.action[e.name]={do:e.do,undo:e.undo},this},registerFilter:function(e){if("string"!=typeof e.name)throw new Error("Can't register filter; filter.name must be a string");if("function"!=typeof e.matcher)throw new Error("Can't register filter; filter.matcher must be a function");return this.filter[e.name]=e.matcher,this},exportPlatform:function(e){if(!e||!this.options.platforms[e])throw new Error("Please supply a valid platform");var n=xe(this.options.platforms[e],this,e),t=we(function e(n,t,r,i){for(var o in i=i||{},r=r||[],n)n.hasOwnProperty(o)&&(r.push(o),f(n[o])&&"value"in n[o]?i[o]=Se(Ae(n[o],o,r),t):f(n[o])?i[o]=e(n[o],t,r,i[o]):null!==n[o]&&(i[o]=Se(Ae({value:n[o]},o,r),t)),r.pop());return i}(this.properties,n));if(he(Fe)>0){var r=ue(Fe).join("\n");throw console.log(`\n${Fe}:\n${r}\n\n`),new Error("Problems were found when trying to resolve property references")}return t},buildPlatform:function(e){if(!this.options||!(e in(this.options.platforms||{})))throw new Error(`Platform "${e}" does not exist`);var n,t=xe(this.options.platforms[e],this,e),r={properties:n=this.exportPlatform(e),allProperties:Le(n)};return this.emit({platform:e,tree:Ee(r,t)}),e.actions&&e.actions.forEach(n=>n.do(r,e)),this},buildAllPlatforms:function(){return Object.keys(this.options.platforms).forEach(e=>this.buildPlatform(e)),this},extend:function(e){return function e(n,t,r){if(null==n)return{};var i,o,s,p,c,l,h=n[0]||{},u=1,m=n.length;for(r=r||[],"object"!=typeof h&&(h={});u<m;u++)if(null!=(c=n[u]))for(p in c)if(c.hasOwnProperty(p)&&(i=h[p],h!==(s=c[p])))if(s&&(f(s)||(o=a(s)))){o?(o=!1,l=i&&a(i)?i:[]):l=i&&f(i)?i:{};var d=r.slice(0);d.push(p),h[p]=e([l,s],t,d)}else void 0!==s&&(null!=i&&"function"==typeof t&&t({target:h,copy:c,path:r,key:p}),h[p]=s);return h}([{},this,{options:e},e])},emit:(e,n)=>console.log("Emitting tree:",e,n)};export default Re;
